# chapter03 역할, 책임, 혐력

적절한 협력 → 적절한 책임 → 적절한 객체에게 할당 → 유연한 설계 창조

## 책임을 할당할 때 고려 사항
 1. 메시지가 객체를 결정한다.
 2. 행동이 상태를 결정한다.

행동이 중요하다. 객체가 가질 수 있는 상태는 행동을 결정하고 나서야 비로소 결정할 수 있다.
협력이 객체의 행동을 결정하고 행동이 상태를 결정한다. 
그리고 그 행동이 바로 객체의 책임이 된다.

특정한 협력 안에서 수행하는 책임의 집합 → 역할

책임과 역할을 중심으로 협력을 바라보는 것이 바로 변경과 확장이 용이한 유연한 설계로 나아가는 첫 걸음이다.

추상 클래스는 책임의 일부를 구현
인터페이스는 일체의 구현 없이 책임의 집합만을 나열해둠

### 객체 대 역할

협력에 적절한 책임을 수행하는 대상이 한 종류라면 간단하게 객체로 간주한다. 만약 여러 종류의 객체들이 참여할 수 있다면 역할이라고 부르면 된다.
린스카우에 따르면 협력은 역할들의 상호작용으로 구성되고, 협력을 구성하기 위해 역할에 적합한 객체가 선택되며, 객체는 클래스를 이용해 구현되고 생성된다.

설계 초반에는 적절한 책임과 협력의 큰 그림을 탐색하는 것이 가장 중요한 목표여야 하고 역할과 객체를 명확하게 구분하는 것은 그렇게 중요하지 않다. 
따라서 애매하다면 단순하게 객체로 시작하고 반복적으로 책임과 협력을 정제해가면서 필요한 순간에 객체로부터 역할을 분리해는 것이 가장 좋은 방법이다.

역할의 가장 큰 장점은 설계의 구성 요소를 추상화할 수 있다. 두 번째 장점은 설계를 유연하게 만들 수 있다.

협력 안에서 역할이라는 추상화를 이용하면 기본 코드를 수정하지 않고 새로운 행동을 추가할 수 있다.

연극 안에서 배역을 연기하는 배우라는 은유는 협력 안에서 역할을 수행하는 객체라는 관점이 가진 입체적인 측면들을 훌륭하게 담아낸다.
협력은 연극과 동일하고 코드는 극본과 동일하다. 
배우는 연극이 상영될 때 배역이라는 특정한 역할을 연기한다.
객체는 협력이라는 실행 문맥안에서 특정한 역할을 수행한다.
연극 배우는 연극이 끝나면 자신의 배역을 잊고 원래의 자기 자신을 되찾는다.
객체는 협력이 끝나고 협력에서의 역할을 잊고 원래의 객체로 돌아올 수 있다.

객체는 다양한 역할을 가질 수 있다. 객체는 협력에 참여할 때 협력 안에서 하나의 역할로 보여진다. 객체가 다른 협력에 참여할 때는 다른 역할로 보여진다.
협력의 관점에서 동일한 역할을 수행하는 객체들은 서로 대체 가능하다. 
역할은 특정한 객체의 종류를 캡슐화하기 때문에 동일한 역할을 수행하고 계약을 준수하는 대체 가능한 객체들은 다형적이다.